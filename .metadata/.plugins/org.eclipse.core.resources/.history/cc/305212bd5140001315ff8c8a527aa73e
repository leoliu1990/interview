package edu.rice.stack;

import java.util.ArrayList;
import java.util.EmptyStackException;

public class SetOfStacks<E> {
	private int singlesize;
	private ArrayList<E[]> list;
	private int total;
	
	private int loc_pop;
	private int loc_push;
	private int offset_pop;
	private int offset_push;
	
	
	public SetOfStacks(int singlesize){
		this.singlesize = singlesize;
		initialize();
	}
	
	private void initialize(){
		list.add((E[]) new Object[singlesize]);
		this.list = new ArrayList<E[]>();
		this.total = 0;
		this.loc_pop  = 0;
		this.loc_push = 0;
		this.offset_pop  = 0;
		this.offset_push = 0;
	}
	
	public E push(E item){
		E array[] = list.get(loc_push);
		array[offset_push] = item;
		list.set(loc_push, array);
		if(offset_push == singlesize-1){
			list.add((E[]) new Object[singlesize]);
			loc_push++;
			offset_push = 0;
		}
		total++;
		return item;
	}
	
	public E peek(){
		if(total == 0)
			throw new EmptyStackException();
		E array[] = list.get(loc_pop);
		return array[offset_pop];
	}
	
	public E pop(){
		if(total == 0)
			throw new EmptyStackException();
	}
}
